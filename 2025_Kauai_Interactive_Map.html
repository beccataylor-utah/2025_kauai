<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Kauai Overview Map - Natural Attractions, Activities, Food, Lodging & Towns</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      right: 0;
      left: 260px;
      transition: left 0.3s ease;
    }
    #map.expanded {
      left: 50px;
    }
    #sidebar {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 260px;
      overflow-y: auto;
      overflow-x: hidden;
      background: #ffffff;
      border-right: 1px solid #d0d0d0;
      padding: 0;
      box-sizing: border-box;
      transition: width 0.3s ease;
    }
    #sidebar.collapsed {
      width: 50px;
    }
    #sidebar.collapsed .sidebar-content {
      display: none;
    }
    #toggleBtn {
      position: absolute;
      top: 3px;
      right: 3px;
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 3px;
      transition: background 0.2s;
      line-height: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ccc;
      z-index: 10;
    }
    #toggleBtn:hover {
      background: rgba(0, 0, 0, 0.05);
      border-radius: 6px;
    }
    #toggleBtn svg {
      width: 20px;
      height: 20px;
    }
    .sidebar-content {
      padding: 50px 10px 20px 10px;
    }
    .header-section {
      text-align: center;
      margin-bottom: 0;
      padding-bottom: 15px;
      border-bottom: 1px solid #e0e0e0;
    }
    .header-section h1 {
      font-size: 18px;
      margin: 0 0 8px 0;
      color: #2c3e50;
    }
    .itinerary-link {
      display: inline-block;
      background: #3d7be0;
      color: white;
      padding: 8px 16px;
      text-decoration: none;
      border-radius: 4px;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 10px;
    }
    .itinerary-link:hover {
      background: #2d5bb0;
    }
    .legend {
      background: #f8f9fa;
      padding: 12px;
      border-radius: 4px;
      margin-top: 15px;
    }
    .legend-title {
      font-size: 12px;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 8px;
      text-align: center;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      font-weight: 500;
      margin: 5px 0;
    }
    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      flex-shrink: 0;
      border: 1px solid #fff;
      box-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }
    .coast-group {
      padding-top: 15px;
      padding-bottom: 15px;
      border-top: 1px solid #e0e0e0;
    }
    .coast-title {
      font-weight: 600;
      margin: 0 0 10px 0;
    }
    .loc-item {
      font-size: 13px;
      margin: 3px 0;
      cursor: pointer;
    }
    .loc-dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 6px;
    }
    .loc-item.natural .loc-dot { background: #ffbd29; }
    .loc-item.activity .loc-dot { background: #9f3dca; }
    .loc-item.food .loc-dot { background: #d24522; }
    .loc-item.lodging .loc-dot { background: #3d7be0; }
    .loc-item:hover {
      background: #f0f4ff;
    }
  </style>
</head>
<body>
<div id="sidebar">
  <button id="toggleBtn" onclick="toggleSidebar()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="9" y1="3" x2="9" y2="21"></line>
    </svg>
  </button>
  <div class="sidebar-content">
    <div class="header-section">
      <h1>Kauai Interactive Map</h1>
      <a href="index.html" class="itinerary-link">üìÖ View Itinerary</a>
      
      <div class="legend">
        <div class="legend-title">Map Key</div>
        <div class="legend-item">
          <span class="legend-dot" style="background: #ffbd29;"></span>
          <span>Natural Attractions</span>
        </div>
        <div class="legend-item">
          <span class="legend-dot" style="background: #9f3dca;"></span>
          <span>Activities & Recreation</span>
        </div>
        <div class="legend-item">
          <span class="legend-dot" style="background: #d24522;"></span>
          <span>Food & Drink</span>
        </div>
        <div class="legend-item">
          <span class="legend-dot" style="background: #3d7be0;"></span>
          <span>Lodging & Towns</span>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  var map = L.map('map', {
    zoomControl: false
  }).setView([22.04928048666666, -159.46967705333333], 10);

  L.control.zoom({
    position: 'bottomright'
  }).addTo(map);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18
  }).addTo(map);

  function makePinIcon(color) {
    var svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">' +
              '<path fill="' + color + '" d="M16 2c-5 0-9 4-9 9 0 6.5 9 19 9 19s9-12.5 9-19c0-5-4-9-9-9z"/>' +
              '<circle cx="16" cy="11" r="4.5" fill="white"/>' +
              '</svg>';
    var url = "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(svg);
    return L.icon({
      iconUrl: url,
      iconSize: [26, 34],
      iconAnchor: [13, 34],
      popupAnchor: [0, -30]
    });
  }

  var iconNatural = makePinIcon("#ffbd29");
  var iconActivity = makePinIcon("#9f3dca");
  var iconFood = makePinIcon("#d24522");
  var iconLodging = makePinIcon("#3d7be0");

  var locations = [{"id": "marriott_beach_club", "name": "Marriott's Kaua'i Beach Club (Kalapaki Beach)", "lat": 21.960434, "lon": -159.350469, "category": "lodging", "coast": "East Shore", "name_query": "Marriott%27s+Kaua%27i+Beach+Club+%28Kalapaki+Beach%29", "features": ["Oceanfront resort on Kalapaki Bay", "Central home base for exploring the island", "Nearby shops and harbor views"]}, {"id": "hanalei_town", "name": "Hanalei Town", "lat": 22.2013, "lon": -159.4966, "category": "lodging", "coast": "North Shore", "name_query": "Hanalei+Town", "features": ["Relaxed surf town with shops and galleries", "Great jumping-off point for north shore beaches", "Walkable main street with food trucks"]}, {"id": "kapaa_town", "name": "Kapa ªa Town", "lat": 22.0752, "lon": -159.318, "category": "lodging", "coast": "East Shore", "name_query": "Kapa%CA%BBa+Town", "features": ["Bustling coastal town with shops and cafes", "Access to Kauai Coastal Path for biking and walking", "Central spot between north and south shores"]}, {"id": "kilauea_town", "name": "Kƒ´lauea Town", "lat": 22.212, "lon": -159.402, "category": "lodging", "coast": "North Shore", "name_query": "K%C4%ABlauea+Town", "features": ["Small town near Kƒ´lauea lighthouse", "Local cafes and small boutiques", "Close to north shore beaches and farms"]}, {"id": "waimea_town", "name": "Waimea Town", "lat": 21.958, "lon": -159.666, "category": "lodging", "coast": "West Side", "name_query": "Waimea+Town", "features": ["Historic west side town", "Gateway to Waimea Canyon and K≈çke ªe", "Plantation-era buildings and local eateries"]}, {"id": "koloa_town", "name": "K≈çloa Town", "lat": 21.9023564, "lon": -159.4641608, "category": "lodging", "coast": "South Shore", "name_query": "K%C5%8Dloa+Town", "features": ["Charming plantation-era town", "Shops and eateries in old town buildings", "On the road between Po ªip≈´ and Lƒ´hu ªe"]}, {"id": "poipu_town", "name": "Po ªip≈´", "lat": 21.8735, "lon": -159.44857, "category": "lodging", "coast": "South Shore", "name_query": "Po%CA%BBip%C5%AB", "features": ["Resort area on the sunny south shore", "Easy access to Po ªip≈´ Beach and coastal walks", "Cluster of hotels, condos, and restaurants"]}, {"id": "hanapepe_town", "name": "Hanapƒìpƒì", "lat": 21.9073347, "lon": -159.5943975, "category": "lodging", "coast": "West Side", "name_query": "Hanap%C4%93p%C4%93", "features": ["Historic art town with galleries and shops", "Famous for Friday Night Art Walk", "Close to Port Allen and west side beaches"]}, {"id": "poipu_beach_park", "name": "Po ªip≈´ Beach Park", "lat": 21.8707, "lon": -159.4525, "category": "natural", "coast": "South Shore", "name_query": "Po%CA%BBip%C5%AB+Beach+Park", "features": ["Crescent-shaped beach with calm swimming", "Frequent turtle and monk seal sightings (keep distance)", "Beautiful sunset views"]}, {"id": "lawai_beach", "name": "LƒÅwa'i Beach (PKs snorkeling)", "lat": 21.87302, "lon": -159.47219, "category": "natural", "coast": "South Shore", "name_query": "L%C4%81wa%E2%80%98i+Beach+%28PKs+snorkeling%29", "features": ["Excellent shore-access snorkeling over reef", "Small roadside beach next to Beach House restaurant", "Best in calmer sea conditions"]}, {"id": "spouting_horn", "name": "Spouting Horn Blowhole", "lat": 21.88469, "lon": -159.49295, "category": "natural", "coast": "South Shore", "name_query": "Spouting+Horn+Blowhole", "features": ["Lava rock blowhole that sends up sea spray", "Short paved viewpoint with guardrail", "Dramatic at higher surf and incoming tide"]}, {"id": "waimea_canyon", "name": "Waimea Canyon Lookout", "lat": 22.0718055, "lon": -159.6616083, "category": "natural", "coast": "West Side", "name_query": "Waimea+Canyon+Lookout", "features": ["Panoramic views of the 'Grand Canyon of the Pacific'", "Pullouts and viewpoints along the rim road", "Cooler temperatures at elevation"]}, {"id": "kokee_state_park", "name": "K≈çke ªe State Park (lookouts area)", "lat": 22.129217, "lon": -159.65538, "category": "natural", "coast": "West Side", "name_query": "K%C5%8Dke%CA%BBe+State+Park+%28lookouts+area%29", "features": ["Forest park above Waimea Canyon", "Lookouts over NƒÅ Pali cliffs and valleys", "Trailheads into high-elevation rainforest"]}, {"id": "hanalei_bay", "name": "Hanalei Bay (pier area)", "lat": 22.212562, "lon": -159.497052, "category": "natural", "coast": "North Shore", "name_query": "Hanalei+Bay+%28pier+area%29", "features": ["Huge crescent bay backed by waterfalls", "Pier for strolling, photos, and jumping when allowed", "Great for sunrise paddles and sunset walks"]}, {"id": "queens_bath", "name": "Queen's Bath access area", "lat": 22.22392, "lon": -159.48505, "category": "natural", "coast": "North Shore", "name_query": "Queen%27s+Bath+access+area", "features": ["Lava shelf with tide pools (often hazardous)", "Area subject to closures in winter swell", "Check official status and surf conditions"]}, {"id": "kilauea_lighthouse", "name": "Kƒ´lauea Point National Wildlife Refuge (lighthouse)", "lat": 22.227764, "lon": -159.401214, "category": "natural", "coast": "North Shore", "name_query": "K%C4%ABlauea+Point+National+Wildlife+Refuge+%28lighthouse%29", "features": ["Dramatic cliff-top lighthouse and seabird sanctuary", "Views of nesting seabirds and, in season, whales offshore", "Timed-entry refuge managed by U.S. Fish & Wildlife"]}, {"id": "hanakapiai_beach", "name": "HanakƒÅpƒ´ ªai Beach", "lat": 22.20815, "lon": -159.5964, "category": "natural", "coast": "North Shore", "name_query": "Hanak%C4%81p%C4%AB%CA%BBai+Beach", "features": ["Remote beach reached by NƒÅ Pali trail", "Powerful surf and strong currents (no swimming days are common)", "End of 2-mile approach section of Kalalau Trail"]}, {"id": "hanakapiai_falls", "name": "HanakƒÅpƒ´ ªai Falls", "lat": 22.18548, "lon": -159.59502, "category": "natural", "coast": "North Shore", "name_query": "Hanak%C4%81p%C4%AB%CA%BBai+Falls", "features": ["Tall waterfall and plunge pool in lush valley", "Multiple stream crossings and muddy sections", "Roughly 8 miles round-trip from trailhead"]}, {"id": "wailua_kayak_launch", "name": "Wailua River kayak & Secret Falls route", "lat": 22.04621, "lon": -159.33996, "category": "activity", "coast": "East Shore", "name_query": "Wailua+River+kayak+%26+Secret+Falls+route", "features": ["Kayak route up Wailua River to trailhead", "Short jungle hike to Uluwehi (Secret) Falls", "Guided and self-guided options"]}, {"id": "kilohana_tubing_activity", "name": "Kaua'i Backcountry mountain tubing", "lat": 21.98274, "lon": -159.38566, "category": "activity", "coast": "East Shore", "name_query": "Kaua%27i+Backcountry+mountain+tubing", "features": ["Inner-tube float through plantation irrigation canals", "Light adventure suitable for most fitness levels", "Includes headlamps for tunnel sections"]}, {"id": "mahaulepu_trail_activity", "name": "MƒÅhƒÅ'ulep≈´ Heritage Trail (trailhead at Shipwreck)", "lat": 21.86417, "lon": -159.44338, "category": "activity", "coast": "South Shore", "name_query": "M%C4%81h%C4%81%E2%80%98ulep%C5%AB+Heritage+Trail+%28trailhead+at+Shipwreck%29", "features": ["Coastal bluff hike along undeveloped shoreline", "Approx. 4 miles round-trip to MƒÅhƒÅ'ulep≈´ Beach", "Hike difficulty: Moderate with sun exposure"]}, {"id": "shipwreck_cliff_activity", "name": "Shipwreck Beach cliff jumping spot", "lat": 21.866, "lon": -159.4398, "category": "activity", "coast": "South Shore", "name_query": "Shipwreck+Beach+cliff+jumping+spot", "features": ["Popular cliff-jump rock above sandy beach", "Check surf, tides, and posted safety signs", "Good sunrise vantage and start of trail"]}, {"id": "port_allen_activity", "name": "Port Allen Harbor (NƒÅ Pali boat departures)", "lat": 21.90611, "lon": -159.58917, "category": "activity", "coast": "West Side", "name_query": "Port+Allen+Harbor+%28N%C4%81+Pali+boat+departures%29", "features": ["Departure harbor for south/west NƒÅ Pali cruises", "Small harbor area with tour offices", "Sunset cruises and snorkel trips"]}, {"id": "kalalau_trailhead_activity", "name": "Na'Pali Coast (Kalalau Trailhead at Kƒì ªe Beach)", "lat": 22.22056, "lon": -159.583318, "category": "activity", "coast": "North Shore", "name_query": "Na%27Pali+Coast+%28Kalalau+Trailhead+at+K%C4%93%CA%BBe+Beach%29", "features": ["Start of the Kalalau and HanakƒÅpƒ´ ªai hikes", "Cliffside rainforest and coastal views in first mile", "Reservation system for parking and access"]}, {"id": "kcc_pac_activity", "name": "Kaua'i Community College Performing Arts Center", "lat": 21.97278, "lon": -159.39917, "category": "activity", "coast": "East Shore", "name_query": "Kaua%27i+Community+College+Performing+Arts+Center", "features": ["Local concerts and shows", "Indoor evening activity option in Lƒ´hu ªe", "Often hosts community cultural events"]}, {"id": "anaina_hou_activity", "name": "Anaina Hou Community Park / Porter Pavilion", "lat": 22.211111, "lon": -159.409722, "category": "activity", "coast": "North Shore", "name_query": "Anaina+Hou+Community+Park+%2F+Porter+Pavilion", "features": ["Mini-golf, walking paths, and play areas", "Outdoor venue for concerts and events", "Local-focused community hub"]}, {"id": "java_kai", "name": "Java Kai (Kapa ªa)", "lat": 22.07576, "lon": -159.31823, "category": "food", "coast": "East Shore", "name_query": "Java+Kai+%28Kapa%CA%BBa%29", "features": ["Bright, surfy coffee shop and cafe", "Bowls, smoothies, and baked goods", "Popular stop on Kapa ªa main drag"]}, {"id": "dark_horse", "name": "Dark Horse Coffee (Kapa ªa)", "lat": 22.07615, "lon": -159.3186, "category": "food", "coast": "East Shore", "name_query": "Dark+Horse+Coffee+%28Kapa%CA%BBa%29", "features": ["Third-wave espresso bar style cafe", "Minimalist interior with work-friendly vibe", "Nice stop before or after path bike rides"]}, {"id": "hanalei_bread_co", "name": "Hanalei Bread Co.", "lat": 22.20367, "lon": -159.49684, "category": "food", "coast": "North Shore", "name_query": "Hanalei+Bread+Co.", "features": ["Bakery and coffee in the heart of Hanalei", "Indoor-outdoor seating with relaxed vibe", "Great pre-beach breakfast stop"]}, {"id": "art_cafe_hemingway", "name": "Art Cafe Hemingway", "lat": 22.07572, "lon": -159.3169, "category": "food", "coast": "East Shore", "name_query": "Art+Cafe+Hemingway", "features": ["European-style cafe with thoughtful menu", "Artful, cozy ambience for long chats", "Nice brunch and coffee stop in Kapa ªa"]}];

  var markersById = {};

  function buildPopupHtml(loc) {
    var nameLink = '<a href="https://www.google.com/search?q=' + loc.name_query +
                   '" target="_blank"><strong>' + loc.name + '</strong></a>';
    var featureLines = '<ul>' + loc.features.map(function(f) {
      return '<li>' + f + '</li>';
    }).join('') + '</ul>';
    return '<div>' + nameLink + featureLines + '</div>';
  }

  locations.forEach(function(loc) {
    var icon = iconActivity;
    if (loc.category === 'natural') icon = iconNatural;
    if (loc.category === 'food') icon = iconFood;
    if (loc.category === 'lodging') icon = iconLodging;

    var marker = L.marker([loc.lat, loc.lon], { icon: icon }).addTo(map);
    marker.bindPopup(buildPopupHtml(loc));
    markersById[loc.id] = marker;
  });

  var kalalauCoords = [
    [22.22056,-159.583318],
    [22.2165,-159.5870],
    [22.2130,-159.5905],
    [22.2100,-159.5935],
    [22.20815,-159.59640],
    [22.2025,-159.5960],
    [22.1975,-159.5955],
    [22.1915,-159.5952],
    [22.18548,-159.59502]
  ];
  L.polyline(kalalauCoords, {
    color: "#9f3dca",
    weight: 3,
    dashArray: "4,6"
  }).addTo(map);

  var latlngs = locations.map(function(loc) {
    return [loc.lat, loc.lon];
  }).concat(kalalauCoords);
  var bounds = L.latLngBounds(latlngs);
  map.fitBounds(bounds.pad(0.15));

  var sidebarContent = document.querySelector('.sidebar-content');
  var coasts = ["North Shore", "East Shore", "South Shore", "West Side"];

  coasts.forEach(function(coast) {
    var groupDiv = document.createElement('div');
    groupDiv.className = 'coast-group';

    var titleDiv = document.createElement('div');
    titleDiv.className = 'coast-title';
    titleDiv.textContent = coast;
    groupDiv.appendChild(titleDiv);

    locations.filter(function(loc) { return loc.coast === coast; })
             .forEach(function(loc) {
      var itemDiv = document.createElement('div');
      itemDiv.className = 'loc-item ' + loc.category;
      itemDiv.setAttribute('data-id', loc.id);

      var dotSpan = document.createElement('span');
      dotSpan.className = 'loc-dot';
      itemDiv.appendChild(dotSpan);

      var textSpan = document.createElement('span');
      textSpan.textContent = loc.name;
      itemDiv.appendChild(textSpan);

      itemDiv.addEventListener('mouseenter', function() {
        var m = markersById[loc.id];
        if (m) m.setZIndexOffset(1000);
      });
      itemDiv.addEventListener('mouseleave', function() {
        var m = markersById[loc.id];
        if (m) m.setZIndexOffset(0);
      });

      itemDiv.addEventListener('click', function() {
        var m = markersById[loc.id];
        if (m) m.openPopup();
      });

      groupDiv.appendChild(itemDiv);
    });

    sidebarContent.appendChild(groupDiv);
  });

  function toggleSidebar() {
    var sidebar = document.getElementById('sidebar');
    var mapDiv = document.getElementById('map');
    
    sidebar.classList.toggle('collapsed');
    mapDiv.classList.toggle('expanded');
    
    setTimeout(function() {
      map.invalidateSize();
    }, 300);
  }
</script>
</body>
</html>
